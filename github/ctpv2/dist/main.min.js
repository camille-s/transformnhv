/*! ctpv2 05-02-2018 */

var d3map=function(){var e,t,a,r,l,i,s,d,o={};function c(e){e.each(function(e){i=d3.select(this),u(this,e)})}var u=function(n,d){e=e||parseInt(i.style("width")),t=1*e,a=d3.geoMercator().scale(1).translate([0,0]),r=d3.geoPath().projection(a);var o=.95/(((s=r.bounds(d))[1][0]-s[0][0])/e),u=[(e-o*(s[1][0]+s[0][0]))/2,(t-o*(s[1][1]+s[0][1]))/2];a.scale(o).translate(u);(l=d3.select(n).append("svg").attr("width",e).attr("height",t)).append("g").selectAll("path").data(d.features).enter().append("path").attr("d",r).attr("class","polygon");c.draw()};function p(e){return 0===e.i?e.generatedLabels[e.i].replace("NaN% to","Less than").replace("$NaN to","Less than").replace("NaN to","Less than"):e.i===e.genLength-1?("More than "+e.generatedLabels[e.genLength-1]).replace(" to NaN%","").replace(" to $NaN","").replace(" to NaN",""):e.generatedLabels[e.i]}return c.draw=function(){var n=parseInt(i.style("width")),d=1*n;this.width(n).height(d);var o=.95/((s[1][0]-s[0][0])/e),u=[(e-o*(s[1][0]+s[0][0]))/2,(t-o*(s[1][1]+s[0][1]))/2];return a.scale(o).translate(u),r=d3.geoPath().projection(a),l.attr("width",n).attr("height",d).selectAll(".polygon").attr("d",r),c},c.color=function(e,t,a){if(!arguments.length)return c;t=t||d3.schemePurples[5],n=t.length,e.forEach(function(e){e.value=+e.value});var r=d3.nest().key(function(e){return e.name}).entries(e),l=r.map(function(e){return e.values[0].value}),s=ss.ckmeans(l,n).map(function(e){return e[0]}).slice(1);d=d3.scaleThreshold().domain(s).range(t),r.forEach(function(e){o[e.key]=e.values[0].value});i.selectAll(".polygon").attr("fill",function(e){var t=o[e.properties.name];return void 0===t?"#bbb":d(t)});return c},c.tip=function(e,t,a){e=e||"d3-tip",t=t||d3.format("");var r=d3.tip().attr("class",e);return i.selectAll(".polygon").call(r).on("mouseover",function(){var e,l,n,i,s,d;r.html((e=d3.select(this),l=t,n=a,i=e.datum().properties.name,s=o[i],d=void 0===s?"N/A":l(s),(n?'<span class="tip-label">'+i+": </span>":"")+d)),r.show()}).on("mouseout",r.hide),c},c.legend=function(e,t,a,r){r=r||"legendQuant",e=e||d3.format(""),t=t||20,a=a||20;var l=i.append("div").style("position","absolute").style("left",t+"px").style("bottom",a+"px").style("pointer-events","none").append("svg"),n=l.append("g").attr("class",r),s=d3.legendColor().labelFormat(e).labels(p).useClass(!1).scale(d);n.call(s);var o=n.node().getBBox();return l.attr("width",o.width).attr("height",o.height),c},c.width=function(t){return arguments.length?(e=t,c):e},c.height=function(e){return arguments.length?(t=e,c):t},c};function dotOver(e){d3.select(e).transition().duration(200).attr("r",7)}function dotOut(e){d3.select(e).transition().duration(200).attr("r",4)}function barOver(e){d3.select(e).transition().duration(200).style("stroke-width",4)}function barOut(e){d3.select(e).transition().duration(200).style("stroke-width",1)}function redrawDots(){d3.selectAll(".dimple-marker").attr("r",4).attr("fill",function(e){return d3.select(this).attr("stroke")}).style("stroke-width",4)}function p(e){return d3.format(".2p")(e)}function yr(e){return d3.timeFormat("%Y")(e)}function span(e){return"<span>"+e+"</span>"}function horizTip(e){return span(e.y+": "+p(e.xValue))}function horizTip2(e){return span(e.y+": "+e.xValue)}function vertTip(e){return span(e.x+": "+p(e.yValue))}function horizGroupTip(e){return span(e.cy+", "+e.aggField[0]+": "+p(e.xValue))}function vertGroupTip(e){return span(e.cx+", "+e.aggField[0]+": "+p(e.yValue))}function trendTip(e){return span(yr(e.x)+": "+p(e.yValue))}function trendGroupTip(e){return span(("All"===e.aggField[0]?"Goal":e.aggField[0])+", "+yr(e.x)+": "+p(e.yValue))}function trendTipThous(e){return span(yr(e.x)+": "+d3.format(",")(e.yValue))}function pieTip(e){return span(e.aggField[0]+": "+d3.format(",")(e.pValue))}var pink=new dimple.color("#992156"),ltblue=new dimple.color("#739DD0"),dkblue=new dimple.color("#2f588b"),green=new dimple.color("#359957"),scale5=[new dimple.color("#b92868"),new dimple.color("#b04f86"),new dimple.color("#a16ba4"),new dimple.color("#8984c5"),new dimple.color("#5d9be6"),new dimple.color("#555")],scale3=[new dimple.color("#b92868"),new dimple.color("#a16ba4"),new dimple.color("#5d9be6"),new dimple.color("#555")],demoscale=[new dimple.color("#992156"),new dimple.color("#9d526c"),new dimple.color("#9e7682"),new dimple.color("#2f588b"),new dimple.color("#50678f"),new dimple.color("#6a7792"),new dimple.color("#818896"),new dimple.color("#359957"),new dimple.color("#5e9a6d"),new dimple.color("#7d9a83")],choroscale=["#e8e5ed","#d8b6c5","#c6879e","#b15879","#992156"];function initChildhood(e,t,a,r,l,n){if(e)throw e;t.forEach(function(e){e.value=+e.value}),a.forEach(function(e){e.value=+e.value}),r.forEach(function(e){e.value=+e.value}),l.forEach(function(e){e.value=+e.value}),n.forEach(function(e){e.value=+e.value}),makeEnrollTrend(t);var i=[makeChildcareRings(r),makeAbsBars(l),makeIncomeBars(n),makeTypeBars(a)];redrawDots(),d3.select(window).on("resize",function(){i.forEach(function(e){e.draw(0,!0)}),makeEnrollTrend(t),redrawDots()})}function makeAbsBars(e){var t=dimple.filterData(dimple.filterData(e,"year","2015-2016"),"name",["Kindergarten","Grade 1","Grade 2","Grade 3"]);console.log(t);var a=12,r=18,l=60,n=80,i=d3.select("#absence-bars").append("svg").attr("width","100%").attr("height","100%"),s=new dimple.chart(i,t);s.setMargins(n,a,r,l),s.defaultColors=[pink,ltblue];var d=s.addCategoryAxis("y",["name","type"]);d.title=null,d.addOrderRule(["Kindergarten","Grade 1","Grade 2","Grade 3"],!0);var o=s.addMeasureAxis("x","value");o.tickFormat=".0%",o.ticks=6,o.title=null,s.addSeries("type",dimple.plot.bar),s.addLegend("8%","95%",200,20,"left"),s.draw();var c=d3.tip().attr("class","d3-tip").html(horizGroupTip);return i.selectAll("rect.dimple-bar").call(c).on("mouseover",function(e){c.show(e),barOver(this)}).on("mouseout",function(e){c.hide(e),barOut(this)}),s}function makeIncomeBars(e){var t=12,a=18,r=60,l=80,n=d3.select("#low-inc-bars").append("svg").attr("width","100%").attr("height","100%"),i=new dimple.chart(n,e);i.setMargins(l,t,a,r),i.defaultColors=[pink,ltblue];var s=i.addCategoryAxis("y",["name","type"]);s.title=null,s.addOrderRule(["All races","White","Black","Hispanic"],!0);var d=i.addMeasureAxis("x","value");d.tickFormat=".0%",d.ticks=5,d.title=null,i.addSeries("type",dimple.plot.bar),i.addLegend("8%","95%",200,20,"left"),i.draw();var o=d3.tip().attr("class","d3-tip").html(horizGroupTip);return n.selectAll("rect.dimple-bar").call(o).on("mouseover",function(e){o.show(e),barOver(this)}).on("mouseout",function(e){o.hide(e),barOut(this)}),i}function makeEnrollTrend(e){var t=12,a=18,r=45,l=30,n=d3.select("#prek-trend").select("svg").attr("width","100%").attr("height","100%").html(""),i=new dimple.chart(n,e);i.setMargins(l,t,a,r),i.defaultColors=[green,ltblue,pink];var s=i.addTimeAxis("x","year","%Y","%Y");s.title=null,s.ticks=2;var d=i.addMeasureAxis("y","value");d.tickFormat=".0%",d.ticks=4,d.title=null;var o=i.addSeries(["name"],dimple.plot.line);o.lineMarkers=!0,i.addLegend("8%","95%","100%","10%","left",o),i.draw();var c=d3.tip().attr("class","d3-tip").html(trendGroupTip);return n.selectAll("circle.dimple-marker").call(c).on("mouseover",function(e){c.show(e),dotOver(this)}).on("mouseout",function(e){c.hide(e),dotOut(this)}),i}function makeChildcareRings(e){var t=12,a=10,r=50,l=80,n=d3.select("#childcare-chart").append("svg").attr("width","100%").attr("height","100%"),i=new dimple.chart(n,e);i.setMargins(l,t,a,r),i.defaultColors=[pink,dkblue,ltblue];var s=i.addMeasureAxis("p","value"),d=i.addCategoryAxis("x","dummy"),o=i.addCategoryAxis("y","name"),c=i.addSeries("type",dimple.plot.pie);c.innerRadius=35,c.outerRadius=60,d.hidden=!0,o.title=null,s.addOrderRule(["Center-based","Family care","Shortage"]),o.addOrderRule(["Pre-K","Infants and toddlers"]),i.addLegend("8%","90%",200,20,"left"),i.draw();var u=d3.tip().attr("class","d3-tip").html(pieTip);return n.selectAll("path.dimple-pie").call(u).on("mouseover",function(e){u.show(e),barOver(this)}).on("mouseout",function(e){u.hide(e),barOut(this)}),i}function makeTypeBars(e){var t=12,a=18,r=45,l=30,n=d3.select("#prek-type").append("svg").attr("width","100%").attr("height","100%"),i=new dimple.chart(n,e);i.setMargins(l,t,a,r),i.defaultColors=[dkblue,ltblue],i.addCategoryAxis("x","name").title=null;var s=i.addMeasureAxis("y","value");s.tickFormat=".0%",s.ticks=4,s.title=null;var d=i.addSeries("type",dimple.plot.bar);d.addOrderRule(["Private","Public"]),i.addLegend("8%","95%","100%","10%","left",d),i.draw();var o=d3.tip().attr("class","d3-tip").html(vertGroupTip);return n.selectAll("rect.dimple-bar").call(o).on("mouseover",function(e){o.show(e),barOver(this)}).on("mouseout",function(e){o.hide(e),barOut(this)}),i}function initCommunity(e,t,a,r){if(e)throw e;t.forEach(function(e){e.value=+e.value}),a.forEach(function(e){e.value=+e.value});makeSafetyTrend(t);var l=d3map();d3.select("#violent-crime-map").datum(topojson.feature(r,r.objects.nhv_tracts)).call(l),l.color(a.filter(function(e){return"violent"===e.type}),choroscale).tip("d3-tip",d3.format(".2r"),!1).legend(d3.format(".0f"),20,20);var n=d3map();d3.select("#property-crime-map").datum(topojson.feature(r,r.objects.nhv_tracts)).call(n),n.color(a.filter(function(e){return"property"===e.type}),choroscale).tip("d3-tip",d3.format(".2r"),!1).legend(d3.format(".0f"),20,20),d3.select(window).on("resize",function(){makeSafetyTrend(t),l.draw(),n.draw(),redrawDots()}),redrawDots()}function makeSafetyTrend(e){var t=24,a=32,r=48,l=32,n=d3.select("#safety-trend").select("svg").attr("width","100%").attr("height","100%").html(""),i=new dimple.chart(n,e);i.setMargins(l,t,a,r),i.addTimeAxis("x","year","%Y","%Y").title=null;var s=i.addMeasureAxis("y","value");s.tickFormat=".0%",s.ticks=4,i.defaultColors=[pink,dkblue];var d=i.addSeries("name",dimple.plot.line);d.lineMarkers=!0,i.addLegend("80%","8%","10%","20%","right",d),i.draw();var o=d3.tip().attr("class","d3-tip").html(trendGroupTip);return n.selectAll("circle.dimple-marker").call(o).on("mouseover",function(e){o.show(e),dotOver(this)}).on("mouseout",function(e){o.hide(e),dotOut(this)}).on("touchstart",function(e){d3.event.preventDefault(),o.show(e),dotOver(this)}),i}function initCross(e,t,a,r,l){if(e)throw e;t.forEach(function(e){e.value=+e.value}),a.forEach(function(e){e.value=+e.value}),r.forEach(function(e){e.value=+e.value}),l.forEach(function(e){e.value=+e.value});var n=nestData(t),i=n.length,s=[];n.forEach(function(e,t){var a=makeFinancialBars(e,t,i);s.push(a)}),s.push(makePersonalBars(a)),s.push(makeAgeRace(l)),makePopTrend(r),d3.select(window).on("resize",function(){s.forEach(function(e){e.draw(0,!0)}),makePopTrend(r),redrawDots()}),redrawDots()}function nestData(e){return d3.nest().key(function(e){return e.indicator}).entries(e)}function makeFinancialBars(e,t,a){var r={top:12,right:18,left:40};r.bottom=t===a-1?100:20;var l=100+r.bottom,n=d3.select("#fin-wellbeing").append("div").attr("class","multiple").text(e.key).append("div").append("svg").attr("width","100%").attr("height",l),i=e.values,s=d3.scaleOrdinal().domain(dimple.getUniqueValues(i,"type")).range([pink.fill,dkblue.fill,green.fill]),d=new dimple.chart(n,i);d.setMargins(r.left,r.top,r.right,r.bottom);var o=d.addCategoryAxis("x","name");o.hidden=t!==a-1,o.addOrderRule(["Connecticut","Greater New Haven","New Haven","Ages 18-34","Ages 35-49","Ages 50-64","Ages 65+","Income below $30K","$30K-$75K","$75K+"]);var c=d.addMeasureAxis("y","value");c.title=null,c.ticks=4,c.tickFormat=".0%",c.overrideMax=1;d.addSeries("type",dimple.plot.bar);d.draw(),n.selectAll("rect.dimple-bar").style("fill",function(e){return s(e.aggField[0])}).style("stroke",function(e){return d3.color(s(e.aggField[0])).darker()});var u=d3.tip().attr("class","d3-tip").html(vertTip);return n.selectAll("rect.dimple-bar").call(u).on("mouseover",function(e){u.show(e),barOver(this)}).on("mouseout",function(e){u.hide(e),barOut(this)}),d}function makeMultiples(e){var t=d3.nest().key(function(e){return e.indicator}).entries(e);d3.select("#fin-wellbeing2").selectAll("div.multiple").data(t).enter().append("div").attr("class","multiple").call(makeRow)}function makePersonalBars(e){var t=12,a=18,r=40,l=100,n=d3.select("#per-wellbeing").append("svg").attr("width","100%").attr("height","100%"),i=new dimple.chart(n,e);i.setMargins(l,t,a,r),i.defaultColors=[pink];var s=i.addCategoryAxis("y","name");s.addOrderRule(["CT","GNH","New Haven","NHV low-income","Other NHV"],!0),s.title=null;var d=i.addMeasureAxis("x","value");d.ticks=5,d.title=null;i.addSeries(null,dimple.plot.bar);i.draw();var o=d3.tip().attr("class","d3-tip").html(horizTip2);return n.selectAll("rect.dimple-bar").call(o).on("mouseover",function(e){o.show(e),barOver(this)}).on("mouseout",function(e){o.hide(e),barOut(this)}),i}function makePopTrend(e){var t=12,a=18,r=40,l=40,n=d3.select("#total-pop-trend").select("svg").attr("width","100%").attr("height","100%").html(""),i=new dimple.chart(n,e);i.setMargins(l,t,a,r);var s=i.addTimeAxis("x","year","%Y","%Y");s.title=null,s.timePeriod=d3.timeYear,s.timeInterval=5;var d=i.addMeasureAxis("y","value");d.title=null,d.ticks=6,i.addSeries(null,dimple.plot.line).lineMarkers=!0,i.defaultColors=[pink],i.draw();var o=d3.tip().attr("class","d3-tip").html(trendTipThous);return n.selectAll("circle.dimple-marker").call(o).on("mouseover",function(e){o.show(e),dotOver(this)}).on("mouseout",function(e){o.hide(e),dotOut(this)}).on("touchstart",function(e){d3.event.preventDefault(),o.show(e),dotOver(this)}),i}function makeAgeRace(e){var t=12,a=18,r=60,l=60,n=d3.select("#poverty-age-race").append("svg").attr("width","100%").attr("height","100%"),i=new dimple.chart(n,e);i.setMargins(l,t,a,r),i.defaultColors=scale3;var s=i.addCategoryAxis("y","name");s.title=null,s.addOrderRule(["All races","White","Black","Hispanic"],!0);var d=i.addMeasureAxis("x","value");d.tickFormat=".0%",d.ticks=6,d.title=null;var o=i.addSeries("type",dimple.plot.bubble);o.addOrderRule(["Under 18","Ages 18-64","Ages 65+","All ages"]),i.addLegend("8%","95%","100%","40%","left",o),i.draw(),n.selectAll("circle.dimple-bubble").attr("r",9);var c=d3.tip().attr("class","d3-tip").html(horizGroupTip);return n.selectAll("circle.dimple-bubble").call(c).on("mouseover",function(e){c.show(e),barOver(this)}).on("mouseout",function(e){c.hide(e),barOut(this)}),i}function initEconomy(e,t){if(e)throw e;t.forEach(function(e){e.value=+e.value});makeEmpTrend(t);d3.select(window).on("resize",function(){makeEmpTrend(t),redrawDots()}),redrawDots()}function makeEmpTrend(e){var t=24,a=32,r=48,l=32,n=d3.select("#jobs-trend").select("svg").attr("width","100%").attr("height","100%").html(""),i=new dimple.chart(n,e);i.setMargins(l,t,a,r),i.addTimeAxis("x","year","%Y","%Y").title=null,i.addMeasureAxis("y","value").ticks=6,i.defaultColors=[pink],i.addSeries("name",dimple.plot.line).lineMarkers=!0,i.draw();var s=d3.tip().attr("class","d3-tip").html(trendTipThous);return n.selectAll("circle.dimple-marker").call(s).on("mouseover",function(e){s.show(e),dotOver(this)}).on("mouseout",function(e){s.hide(e),dotOut(this)}),i}function initEducation(e,t,a){if(e)throw e;t.forEach(function(e){e.value=+e.value}),a.forEach(function(e){e.value=+e.value});var r=t.filter(function(e){return"total graduation by location"===e.indicator}),l=t.filter(function(e){return"nhps graduation by race"===e.indicator}),n=[makeGradBars(a)];makeLocTrend(r),makeRaceTrend(l);d3.select(window).on("resize",function(){n.forEach(function(e){e.draw(0,!0)}),makeLocTrend(r),makeRaceTrend(l),redrawDots()}),redrawDots()}function makeLocTrend(e){var t=24,a=32,r=48,l=32,n=d3.select("#grad-trend-loc").select("svg").attr("width","100%").attr("height","100%").html(""),i=new dimple.chart(n,e);i.setMargins(l,t,a,r),i.defaultColors=[dkblue,pink],i.addTimeAxis("x","year","%Y","%Y").title=null;var s=i.addMeasureAxis("y","value");s.tickFormat=".0%",s.ticks=4,s.title=null;var d=i.addSeries("name",dimple.plot.line);d.lineMarkers=!0,i.addLegend("80%","60%","10%","20%","right",d),i.draw();var o=d3.tip().attr("class","d3-tip").html(trendGroupTip);return n.selectAll("circle.dimple-marker").call(o).on("mouseover",function(e){o.show(e),dotOver(this)}).on("mouseout",function(e){o.hide(e),dotOut(this)}).on("touchstart",function(e){d3.event.preventDefault(),o.show(e),dotOver(this)}),i}function makeRaceTrend(e){e=e.filter(function(e){return"All"!==e.type});var t=24,a=32,r=48,l=32,n=d3.select("#grad-trend-race").select("svg").attr("width","100%").attr("height","100%").html(""),i=new dimple.chart(n,e);i.setMargins(l,t,a,r),i.defaultColors=[pink,dkblue,green],i.addTimeAxis("x","year","%Y","%Y").title=null;var s=i.addMeasureAxis("y","value");s.tickFormat=".0%",s.ticks=4,s.title=null;var d=i.addSeries("type",dimple.plot.line);d.lineMarkers=!0,i.addLegend("80%","50%","10%","40%","right",d),i.draw();var o=d3.tip().attr("class","d3-tip").html(trendGroupTip);return n.selectAll("circle.dimple-marker").call(o).on("mouseover",function(e){o.show(e),dotOver(this)}).on("mouseout",function(e){o.hide(e),dotOut(this)}).on("touchstart",function(e){d3.event.preventDefault(),o.show(e),dotOver(this)}),i}function makeGradBars(e){var t=12,a=18,r=40,l=80,n=d3.select("#grad-by-school").append("svg").attr("width","100%").attr("height","100%"),i=new dimple.chart(n,e);i.setMargins(l,t,a,r),i.defaultColors=[pink],i.addCategoryAxis("y","name").title=null;var s=i.addMeasureAxis("x","value");s.tickFormat=".0%",s.ticks=6,s.title=null;i.addSeries(null,dimple.plot.bar);i.draw();var d=d3.tip().attr("class","d3-tip").html(horizTip);return n.selectAll("rect.dimple-bar").call(d).on("mouseover",function(e){d.show(e),barOver(this)}).on("mouseout",function(e){d.hide(e),barOut(this)}),i}function initHealth(e,t,a,r,l){if(e)throw e;console.log(l);var n=d3map();d3.select("#asthma-map").datum(topojson.feature(l,l.objects.nhv_tracts)).call(n),n.color(r.filter(function(e){return"current asthma"===e.indicator}),["#e8e5ed","#d8b6c5","#c6879e","#b15879","#992156"]).tip("d3-tip",d3.format(".1%"),!1).legend(d3.format(".0%"),20,20);var i=d3map();d3.select("#dental-map").datum(topojson.feature(l,l.objects.nhv_tracts)).call(i),i.color(r.filter(function(e){return"dental visit"===e.indicator}),["#e8e5ed","#d8b6c5","#c6879e","#b15879","#992156"]).tip("d3-tip",d3.format(".0%"),!1).legend(d3.format(".0%"),20,20),t.forEach(function(e){e.value=+e.value}),a.forEach(function(e){e.value=+e.value});var s=[makeObesityBars(t),makeSmokingBars(t)];makeObesityTrend(a),makeSmokingTrend(a),makeFoodTrend(a),makeInsuranceTrend(a),d3.select(window).on("resize",function(){s.forEach(function(e){e.draw(0,!0)}),makeObesityTrend(a),makeSmokingTrend(a),makeFoodTrend(a),makeInsuranceTrend(a),n.draw(),i.draw(),redrawDots()}),redrawDots()}function makeObesityBars(e){var t=e.filter(function(e){return"obesity"===e.indicator}),a=12,r=18,l=40,n=90,i=d3.select("#obesity-loc").append("svg").attr("width","100%").attr("height","100%"),s=new dimple.chart(i,t);s.setMargins(n,a,r,l),s.defaultColors=[pink];var d=s.addCategoryAxis("y","name");d.addOrderRule(["CT","GNH","New Haven","NHV low-income","Other NHV"],!0),d.title=null;var o=s.addMeasureAxis("x","value");o.tickFormat=".0%",o.ticks=4,o.title=null;s.addSeries(null,dimple.plot.bar);s.draw();var c=d3.tip().attr("class","d3-tip").html(horizTip);return i.selectAll("rect.dimple-bar").call(c).on("mouseover",function(e){c.show(e),barOver(this)}).on("mouseout",function(e){c.hide(e),barOut(this)}),s}function makeSmokingBars(e){var t=e.filter(function(e){return"smoking"===e.indicator}),a=12,r=18,l=40,n=90,i=d3.select("#smoking-loc").append("svg").attr("width","100%").attr("height","100%"),s=new dimple.chart(i,t);s.setMargins(n,a,r,l),s.defaultColors=[pink];var d=s.addCategoryAxis("y","name");d.addOrderRule(["CT","GNH","New Haven","NHV low-income","Other NHV"],!0),d.title=null;var o=s.addMeasureAxis("x","value");o.tickFormat=".0%",o.ticks=6,o.title=null;s.addSeries(null,dimple.plot.bar);s.draw();var c=d3.tip().attr("class","d3-tip").html(horizTip);return i.selectAll("rect.dimple-bar").call(c).on("mouseover",function(e){c.show(e),barOver(this)}).on("mouseout",function(e){c.hide(e),barOut(this)}),s}function makeObesityTrend(e){var t=e.filter(function(e){return"obesity"===e.indicator}),a=dimple.filterData(t,"series","base"),r=dimple.filterData(t,"series","second"),l=24,n=32,i=48,s=32,d=d3.select("#obesity-trend").select("svg").attr("width","100%").attr("height","100%").html(""),o=new dimple.chart(d,t);o.setMargins(s,l,n,i),o.defaultColors=[ltblue,pink,dkblue],o.addTimeAxis("x","year","%Y","%Y").title=null;var c=o.addMeasureAxis("y","value");c.tickFormat=".0%",c.ticks=4,c.title=null;var u=o.addSeries(null,dimple.plot.line),p=o.addSeries(["name"],dimple.plot.line);u.lineMarkers=!0,p.lineMarkers=!0,u.data=r,p.data=a,o.addLegend("80%","8%","10%","20%","right",p),o.draw();var m=d3.tip().attr("class","d3-tip").html(trendGroupTip);return d.selectAll("circle.dimple-marker").call(m).on("mouseover",function(e){m.show(e),dotOver(this)}).on("mouseout",function(e){m.hide(e),dotOut(this)}),d.select("#dimple-all").style("stroke-dasharray","5, 5"),o}function makeSmokingTrend(e){var t=e.filter(function(e){return"smoking"===e.indicator}),a=dimple.filterData(t,"series","base"),r=dimple.filterData(t,"series","second"),l=24,n=32,i=48,s=32,d=d3.select("#smoking-trend").select("svg").attr("width","100%").attr("height","100%").html(""),o=new dimple.chart(d,t);o.setMargins(s,l,n,i),o.defaultColors=[ltblue,pink,dkblue],o.addTimeAxis("x","year","%Y","%Y").title=null;var c=o.addMeasureAxis("y","value");c.tickFormat=".0%",c.ticks=6,c.title=null;var u=o.addSeries(null,dimple.plot.line),p=o.addSeries(["name"],dimple.plot.line);u.lineMarkers=!0,p.lineMarkers=!0,u.data=r,p.data=a,o.addLegend("80%","8%","10%","20%","right",p),o.draw();var m=d3.tip().attr("class","d3-tip").html(trendGroupTip);return d.selectAll("circle.dimple-marker").call(m).on("mouseover",function(e){m.show(e),dotOver(this)}).on("mouseout",function(e){m.hide(e),dotOut(this)}),d.select("#dimple-all").style("stroke-dasharray","5, 5"),o}function makeFoodTrend(e){var t=e.filter(function(e){return"food_insecurity"===e.indicator}),a=dimple.filterData(t,"series","base"),r=dimple.filterData(t,"series","second"),l=24,n=32,i=48,s=32,d=d3.select("#food-trend").select("svg").attr("width","100%").attr("height","100%").html(""),o=new dimple.chart(d,t);o.setMargins(s,l,n,i),o.defaultColors=[ltblue,pink,dkblue],o.addTimeAxis("x","year","%Y","%Y").title=null;var c=o.addMeasureAxis("y","value");c.tickFormat=".0%",c.ticks=5,c.title=null;var u=o.addSeries(null,dimple.plot.line),p=o.addSeries(["name"],dimple.plot.line);u.lineMarkers=!0,p.lineMarkers=!0,u.data=r,p.data=a,o.addLegend("80%","8%","10%","20%","right",p),o.draw();var m=d3.tip().attr("class","d3-tip").html(trendGroupTip);return d.selectAll("circle.dimple-marker").call(m).on("mouseover",function(e){m.show(e),dotOver(this)}).on("mouseout",function(e){m.hide(e),dotOut(this)}),d.select("#dimple-all").style("stroke-dasharray","5, 5"),o}function makeInsuranceTrend(e){var t=e.filter(function(e){return"insurance"===e.indicator}),a=dimple.filterData(t,"series","base"),r=dimple.filterData(t,"series","second"),l=24,n=32,i=48,s=32,d=d3.select("#insurance-trend").select("svg").attr("width","100%").attr("height","100%").html(""),o=new dimple.chart(d,t);o.setMargins(s,l,n,i),o.defaultColors=[ltblue,pink,dkblue,green],o.addTimeAxis("x","year","%Y","%Y").title=null;var c=o.addMeasureAxis("y","value");c.tickFormat=".0%",c.ticks=5,c.title=null;var u=o.addSeries(null,dimple.plot.line),p=o.addSeries(["name"],dimple.plot.line);u.lineMarkers=!0,p.lineMarkers=!0,u.data=r,p.data=a,p.addOrderRule(["New Haven","GNH","CT"]),o.addLegend("80%","8%","10%","20%","right",p),o.draw();var m=d3.tip().attr("class","d3-tip").html(trendGroupTip);return d.selectAll("circle.dimple-marker").call(m).on("mouseover",function(e){m.show(e),dotOver(this)}).on("mouseout",function(e){m.hide(e),dotOut(this)}),d.select("#dimple-all").style("stroke-dasharray","5, 5"),o}function initHousing(e,t,a,r,l,n){if(e)throw e;r.forEach(function(e){e.value=+e.value}),l.forEach(function(e){e.value=+e.value}),n.forEach(function(e){e.value=+e.value});var i=topojson.feature(t,t.objects.shapes),s=d3map();d3.select("#burden-map").datum(i).call(s),s.color(a,choroscale).tip("d3-tip",d3.format(".2p"),!0).legend(d3.format(".0%"),15,0);var d=[makeBurdenBars(r),makeAge(l),makeAgeRace(n)];d3.select(window).on("resize",function(){d.forEach(function(e){e.draw(0,!0)}),s.draw()})}function makeBurdenBars(e){var t=12,a=18,r=40,l=30;console.log(e);var n=d3.select("#burden-tenure").append("svg").attr("width","100%").attr("height","100%"),i=new dimple.chart(n,e);i.setMargins(l,t,a,r),i.defaultColors=[pink,ltblue];var s=i.addCategoryAxis("x",["name","type"]);s.addOrderRule(["CT","GNH","New Haven"]),s.title=null;var d=i.addMeasureAxis("y","value");d.tickFormat=".0%",d.ticks=5,d.title=null;i.addSeries("type",dimple.plot.bar);i.addLegend("25%","8%","10%","20%","right"),i.draw();var o=d3.tip().attr("class","d3-tip").html(vertGroupTip);return n.selectAll("rect.dimple-bar").call(o).on("mouseover",function(e){o.show(e),barOver(this)}).on("mouseout",function(e){o.hide(e),barOut(this)}),i}function makeAge(e){var t=dimple.filterData(e,"name",["New Haven","CT"]),a=12,r=18,l=45,n=60,i=d3.select("#age-bars").append("svg").attr("width","100%").attr("height","100%"),s=new dimple.chart(i,t);s.setMargins(n,a,r,l),s.defaultColors=[pink,ltblue,dkblue],s.addCategoryAxis("y",["name","type"]).title=null;var d=s.addMeasureAxis("x","value");d.tickFormat=".0%",d.ticks=4,d.title=null;var o=s.addSeries("type",dimple.plot.bar);s.addLegend("8%","95%","100%",20,"left"),o.addOrderRule(["Ages 15-34","Ages 35-64","Ages 65+"]),s.draw();var c=d3.tip().attr("class","d3-tip").html(horizGroupTip);return i.selectAll("rect.dimple-bar").call(c).on("mouseover",function(e){c.show(e),barOver(this)}).on("mouseout",function(e){c.hide(e),barOut(this)}),s}function makeAgeRace(e){e=e.filter(function(e){return"All races"!==e.name&"Other"!==e.name});var t=12,a=18,r=60,l=60,n=d3.select("#tenure-age-race").append("svg").attr("width","100%").attr("height","100%"),i=new dimple.chart(n,e);i.setMargins(l,t,a,r),i.defaultColors=scale5,i.addCategoryAxis("y","name").title=null;var s=i.addMeasureAxis("x","value");s.tickFormat=".0%",s.ticks=6,s.title=null;var d=i.addSeries("type",dimple.plot.bubble);d.addOrderRule(["Under 35","Ages 35-44","Ages 45-54","Ages 55-64","Ages 65+","All ages"]),i.addLegend("8%","85%","100%","20%","left",d),i.draw(),n.selectAll("circle.dimple-bubble").attr("r",9);var o=d3.tip().attr("class","d3-tip").html(horizGroupTip);return n.selectAll("circle.dimple-bubble").call(o).on("mouseover",function(e){o.show(e),barOver(this)}).on("mouseout",function(e){o.hide(e),barOut(this)}),i}function makeTenureTrend(e){}function showInfo(e,t){var a=t.sheets("data").all(),r=t.sheets("sources").all().sort(function(e,t){return e.name<t.name?-1:1});makeCards(a),makeSources(r)}function makeCards(e){d3.select(".grid").selectAll(".grid-item").data(e).enter().append("div").attr("class",function(e){return"grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3 "+e.class}).html(renderCard),$("div.spinner").empty(),setupIsotope()}function makeSources(e){d3.select("#source-list").selectAll("li").data(e).enter().append("li").append("a").attr("href",function(e){return e.url}).text(function(e){return e.name})}function setupIsotope(){var e=$(".grid");e.isotope({itemSelector:".grid-item",percentPosition:!0,masonry:{columnWidth:".grid-sizer"}}),$(".grid-item").on("click",function(){window.location=$(this).find("a").attr("href")});var t=$("#filters");t.on("click",".btn",function(a){a.preventDefault(),$(".grid-item").removeClass("big");var r=$(this).data("filter");e.isotope({filter:r}),t.find(".active").removeClass("active"),$(this).addClass("active")})}function makeFormat(e,t){var a=d3.format(".0%"),r=d3.format(",.0f"),l=d3.format("$,.0f");switch(e){case"percent":return a(+t);case"thousand":return r(+t);case"dollar":return l(+t);case"text":return t;default:return""}}function renderCard(e,t){var a=e;return a.current_val=makeFormat(e.format,e.current_val),a.prev_val=e.prev_val.length?makeFormat(e.format,e.prev_val):"",a.hasLink=!0,Handlebars.templates.cardTemplate(a)}function initLiteracy(e,t,a,r,l,n){if(e)throw e;var i=d3map();d3.select("#diploma-map").datum(topojson.feature(t,t.objects.shapes)).call(i),i.color(r,choroscale).tip("d3-tip",d3.format(".2p"),!0).legend(d3.format(".0%"),15,0);var s=[makeDiplomaLoc(a),makeDiplomaRace(l)];makeDiplomaTrend(n);d3.select(window).on("resize",function(){s.forEach(function(e){e.draw(0,!0)}),makeDiplomaTrend(n),i.draw(),redrawDots()}),redrawDots()}function makeDiplomaLoc(e){var t=12,a=18,r=40,l=60,n=d3.select("#diploma-loc").append("svg").attr("width","100%").attr("height","100%"),i=new dimple.chart(n,e);i.setMargins(l,t,a,r),i.defaultColors=[pink];var s=i.addCategoryAxis("y","name");s.addOrderRule(["CT","GNH","New Haven"],!0),s.title=null;var d=i.addMeasureAxis("x","value");d.tickFormat=".0%",d.ticks=4,d.title=null;i.addSeries(null,dimple.plot.bar);i.draw();var o=d3.tip().attr("class","d3-tip").html(horizTip);return n.selectAll("rect.dimple-bar").call(o).on("mouseover",function(e){o.show(e),barOver(this)}).on("mouseout",function(e){o.hide(e),barOut(this)}).on("touchend",function(e){o.show(e),barOver(this)}),i}function makeDiplomaRace(e){var t=12,a=18,r=40,l=60,n=d3.select("#diploma-race").append("svg").attr("width","100%").attr("height","100%"),i=new dimple.chart(n,e);i.setMargins(l,t,a,r),i.defaultColors=[pink];var s=i.addCategoryAxis("y","type");s.title=null,s.addOrderRule(["All races","White","Black","Hispanic"],!0);var d=i.addMeasureAxis("x","value");d.tickFormat=".0%",d.ticks=4,d.title=null;i.addSeries(null,dimple.plot.bar);i.draw();var o=d3.tip().attr("class","d3-tip").html(horizTip);return n.selectAll("rect.dimple-bar").call(o).on("mouseover",function(e){o.show(e),barOver(this)}).on("mouseout",function(e){o.hide(e),barOut(this)}).on("touchend",function(e){o.show(e),barOver(this)}),i}function makeDiplomaTrend(e){var t=24,a=32,r=48,l=32,n=d3.select("#diploma-trend").select("svg").attr("width","100%").attr("height","100%").html(""),i=new dimple.chart(n,e);i.setMargins(l,t,a,r),i.addTimeAxis("x","year","%Y","%Y").title=null;var s=i.addMeasureAxis("y","value");s.tickFormat=".0%",s.ticks=4,i.defaultColors=[pink,dkblue,ltblue];var d=i.addSeries("name",dimple.plot.line);d.lineMarkers=!0,i.addLegend("80%","8%","10%","20%","right",d),i.draw();var o=d3.tip().attr("class","d3-tip").html(trendGroupTip);return n.selectAll("circle.dimple-marker").call(o).on("mouseover",function(e){o.show(e),dotOver(this)}).on("mouseout",function(e){o.hide(e),dotOut(this)}).on("touchstart",function(e){d3.event.preventDefault(),o.show(e),dotOver(this)}),i}function initWorkforce(e,t,a,r,l,n,i,s){if(e)throw e;r.forEach(function(e){e.value=+e.value}),l.forEach(function(e){e.value=+e.value}),n.forEach(function(e){e.value=+e.value}),i.forEach(function(e){e.value=+e.value}),s.forEach(function(e){e.value=+e.value});var d=d3map();d3.select("#commute-map").datum(topojson.feature(t,t.objects.shapes)).call(d),d.color(i,choroscale).tip("d3-tip",d3.format(".2p"),!0).legend(d3.format(".0%"),15,0);var o=d3map();d3.select("#income-map").datum(topojson.feature(a,a.objects.nhv_tracts)).call(o),o.color(s,choroscale).tip("d3-tip",d3.format("$,"),!1).legend(d3.format("$,"),15,0);var c=makeUnderLocation(r);makeUnderTrend(l),makeUnTrend(n);d3.select(window).on("resize",function(){c.draw(0,!0),makeUnderTrend(l),makeUnTrend(n),d.draw(),o.draw(),redrawDots()}),redrawDots()}function makeUnderLocation(e){var t=12,a=18,r=40,l=100,n=d3.select("#underemployment-chart").append("svg").attr("width","100%").attr("height","100%"),i=new dimple.chart(n,e);i.setMargins(l,t,a,r),i.defaultColors=[pink];var s=i.addCategoryAxis("y","name");s.addOrderRule(["CT","GNH","New Haven","NHV low-income","Other NHV"],!0),s.title=null;var d=i.addMeasureAxis("x","value");d.tickFormat=".0%",d.ticks=4,d.title=null;i.addSeries(null,dimple.plot.bar);i.draw();var o=d3.tip().attr("class","d3-tip").html(horizTip);return n.selectAll("rect.dimple-bar").call(o).on("mouseover",function(e){o.show(e),barOver(this)}).on("mouseout",function(e){o.hide(e),barOut(this)}).on("touchend",function(e){o.show(e),barOver(this)}),i}function makeUnderTrend(e){var t=24,a=32,r=48,l=32,n=d3.select("#underemployment-trend").select("svg").attr("width","100%").attr("height","100%").html(""),i=new dimple.chart(n,e);i.setMargins(l,t,a,r),i.addTimeAxis("x","year","%Y","%Y").title=null;var s=i.addMeasureAxis("y","value");s.tickFormat=".0%",s.ticks=4,i.defaultColors=[ltblue,pink];var d=dimple.filterData(e,"type","past"),o=dimple.filterData(e,"type","goal"),c=i.addSeries("type",dimple.plot.line),u=i.addSeries(null,dimple.plot.line);u.lineMarkers=!0,c.lineMarkers=!0,u.data=d,c.data=o,i.draw(),d3.select("#dimple-goal").style("stroke-dasharray","5, 5");var p=d3.tip().attr("class","d3-tip").html(trendTip);return n.selectAll("circle.dimple-marker").call(p).on("mouseover",function(e){p.show(e),dotOver(this)}).on("mouseout",function(e){p.hide(e),dotOut(this)}).on("touchstart",function(e){d3.event.preventDefault(),p.show(e),dotOver(this)}),i}function makeUnTrend(e){var t=24,a=32,r=48,l=32,n=d3.select("#unemployment-trend").select("svg").attr("width","100%").attr("height","100%").html(""),i=new dimple.chart(n,e);i.setMargins(l,t,a,r),i.addTimeAxis("x","year","%Y","%Y").title=null;var s=i.addMeasureAxis("y","value");s.tickFormat=".0%",s.ticks=6,i.defaultColors=[pink,ltblue];var d=i.addSeries("name",dimple.plot.line);d.lineMarkers=!0,i.addLegend("80%","8%","10%","20%","right",d),i.draw();var o=d3.tip().attr("class","d3-tip").html(trendGroupTip);return n.selectAll("circle.dimple-marker").call(o).on("mouseover",function(e){o.show(e),dotOver(this)}).on("mouseout",function(e){o.hide(e),dotOut(this)}),i}d3.queue().defer(d3.csv,"../assets/data/childhood/acs_prek_enrollment_trend.csv").defer(d3.csv,"../assets/data/childhood/acs_prek_enrollment_by_type.csv").defer(d3.csv,"../assets/data/childhood/childcare.csv").defer(d3.csv,"../assets/data/childhood/chronic_absenteeism.csv").defer(d3.csv,"../assets/data/childhood/low_income_kids_by_race.csv").await(initChildhood),d3.queue().defer(d3.csv,"../assets/data/community/wellbeing_survey_trend.csv").defer(d3.csv,"../assets/data/community/crime_rate_by_tract.csv").defer(d3.json,"../assets/json/nhv_tracts.json").await(initCommunity),d3.queue().defer(d3.csv,"../assets/data/cross/financial_wellbeing.csv").defer(d3.csv,"../assets/data/cross/personal_wellbeing_index.csv").defer(d3.csv,"../assets/data/cross/total_population.csv").defer(d3.csv,"../assets/data/cross/poverty_by_age_race.csv").await(initCross),d3.queue().defer(d3.csv,"../assets/data/economy/total_employment_by_year.csv").await(initEconomy),d3.queue().defer(d3.csv,"../assets/data/education/graduation_rate_trends.csv").defer(d3.csv,"../assets/data/education/graduation_rate_by_school.csv").await(initEducation),d3.queue().defer(d3.csv,"../assets/data/health/health_bars.csv").defer(d3.csv,"../assets/data/health/health_trends.csv").defer(d3.csv,"../assets/data/health/500_cities_tract_current_asthma_dental_visit.csv").defer(d3.json,"../assets/json/nhv_tracts.json").await(initHealth),d3.queue().defer(d3.json,"../assets/json/nhv_neighborhoods.json").defer(d3.csv,"../assets/data/housing/acs_cost_burden_by_neighborhood.csv").defer(d3.csv,"../assets/data/housing/acs_cost_burden_by_tenure.csv").defer(d3.csv,"../assets/data/housing/acs_tenure_by_age.csv").defer(d3.csv,"../assets/data/housing/homeownership_by_race_age.csv").await(initHousing),Tabletop.init({key:"1icln5UH_PknOUcvVenErNrjAR7MDoixmX733iq4NSHE",callback:showInfo,simpleSheet:!1,wanted:["data","sources"]}),function(){var e=Handlebars.template;(Handlebars.templates=Handlebars.templates||{}).cardTemplate=e({1:function(e,t,a,r,l){var n,i=null!=t?t:{},s=a.helperMissing,d="function",o=e.escapeExpression;return'    <a class="area" href="pages/'+o(typeof(n=null!=(n=a.class||(null!=t?t.class:t))?n:s)===d?n.call(i,{name:"class",hash:{},data:l}):n)+'.html">\n        View <span class="hidden learn-more"></span><span>'+o(typeof(n=null!=(n=a.area||(null!=t?t.area:t))?n:s)===d?n.call(i,{name:"area",hash:{},data:l}):n)+"</span>\n    </a>\n"},3:function(e,t,a,r,l){var n;return'        <span class="area">'+e.escapeExpression("function"==typeof(n=null!=(n=a.area||(null!=t?t.area:t))?n:a.helperMissing)?n.call(null!=t?t:{},{name:"area",hash:{},data:l}):n)+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,a,r,l){var n,i,s=null!=t?t:{},d=a.helperMissing,o="function",c=e.escapeExpression;return'<div class="row">\n    \x3c!-- <h5 class="name col-xs-12">'+c(typeof(i=null!=(i=a.name||(null!=t?t.name:t))?i:d)===o?i.call(s,{name:"name",hash:{},data:l}):i)+'</h5> --\x3e\n    <h5 class="name"><span>'+c(typeof(i=null!=(i=a.name||(null!=t?t.name:t))?i:d)===o?i.call(s,{name:"name",hash:{},data:l}):i)+'</span></h5>\n</div>\n\n<div class="row">\n    <div class="col-xs-9">\n        <div class="row row-no-gutter">\n            <h1 class="current-val">'+c(typeof(i=null!=(i=a.current_val||(null!=t?t.current_val:t))?i:d)===o?i.call(s,{name:"current_val",hash:{},data:l}):i)+' <small class="current-year">'+c(typeof(i=null!=(i=a.current_year||(null!=t?t.current_year:t))?i:d)===o?i.call(s,{name:"current_year",hash:{},data:l}):i)+'</small></h1>\n        </div>\n        <div class="row row-no-gutter">\n            <h3 class="prev-val">'+c(typeof(i=null!=(i=a.prev_val||(null!=t?t.prev_val:t))?i:d)===o?i.call(s,{name:"prev_val",hash:{},data:l}):i)+' <small class="prev-year">'+c(typeof(i=null!=(i=a.prev_year||(null!=t?t.prev_year:t))?i:d)===o?i.call(s,{name:"prev_year",hash:{},data:l}):i)+'</small></h3>\n        </div>\n    </div>\n    <div class="col-xs-3">\n        <h1 class="trend">\n            \x3c!-- <span class="glyphicon glyphicon-'+c(typeof(i=null!=(i=a.arrow||(null!=t?t.arrow:t))?i:d)===o?i.call(s,{name:"arrow",hash:{},data:l}):i)+" "+c(typeof(i=null!=(i=a.outcome||(null!=t?t.outcome:t))?i:d)===o?i.call(s,{name:"outcome",hash:{},data:l}):i)+'"></span> --\x3e\n            <svg class="icon '+c(typeof(i=null!=(i=a.outcome||(null!=t?t.outcome:t))?i:d)===o?i.call(s,{name:"outcome",hash:{},data:l}):i)+'" aria-hidden="true">\n                <use xlink:href="./assets/img/icons.svg#'+c(typeof(i=null!=(i=a.arrow||(null!=t?t.arrow:t))?i:d)===o?i.call(s,{name:"arrow",hash:{},data:l}):i)+'"></use>\n            </svg>\n        </h1>\n    </div>\n\n</div>\n\n<div class="row">\n    <div class="descript"><p class="descript-text">'+c(typeof(i=null!=(i=a.description||(null!=t?t.description:t))?i:d)===o?i.call(s,{name:"description",hash:{},data:l}):i)+". <em>("+c(typeof(i=null!=(i=a.source||(null!=t?t.source:t))?i:d)===o?i.call(s,{name:"source",hash:{},data:l}):i)+')</em></p></div>\n</div>\n<div class="row">\n'+(null!=(n=a.if.call(s,null!=t?t.hasLink:t,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.program(3,l,0),data:l}))?n:"")+"</div>\n"},useData:!0})}(),d3.queue().defer(d3.json,"../assets/json/nhv_neighborhoods.json").defer(d3.csv,"../assets/data/literacy/acs_no_high_school_diploma_by_location.csv").defer(d3.csv,"../assets/data/literacy/acs_no_high_school_diploma_by_neighborhood.csv").defer(d3.csv,"../assets/data/literacy/acs_no_high_school_diploma_by_race.csv").defer(d3.csv,"../assets/data/literacy/acs_no_high_school_diploma_trend.csv").await(initLiteracy),d3.queue().defer(d3.json,"../assets/json/nhv_neighborhoods.json").defer(d3.json,"../assets/json/nhv_tracts.json").defer(d3.csv,"../assets/data/workforce/underemployment_by_location.csv").defer(d3.csv,"../assets/data/workforce/underemployment_by_year.csv").defer(d3.csv,"../assets/data/workforce/unemployment_rate_by_year.csv").defer(d3.csv,"../assets/data/workforce/acs_public_transit_by_neighborhood.csv").defer(d3.csv,"../assets/data/workforce/acs_median_income_by_tract.csv").await(initWorkforce);